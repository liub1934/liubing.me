import{_ as n,c as e,a as i,o as a}from"./app-DyfPPSu6.js";const l={};function t(p,s){return a(),e("div",null,s[0]||(s[0]=[i(`<h1 id="记录线上环境-jenkins-vue-打包失败-error-code-elifecycle" tabindex="-1"><a class="header-anchor" href="#记录线上环境-jenkins-vue-打包失败-error-code-elifecycle"><span>记录线上环境 Jenkins Vue 打包失败 error code ELIFECYCLE</span></a></h1><p>Jenkins 里面的 Nodejs 版本换了下，然后自动打包的时候老是失败，提取了下日志信息。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>0 info it worked if it ends with ok</span></span>
<span class="line"><span>1 verbose cli [ &#39;/var/lib/jenkins/tools/jenkins.plugins.nodejs.tools.NodeJSInstallation/NODEJS-8.10.0/bin/node&#39;,</span></span>
<span class="line"><span>1 verbose cli   &#39;/var/lib/jenkins/tools/jenkins.plugins.nodejs.tools.NodeJSInstallation/NODEJS-8.10.0/bin/npm&#39;,</span></span>
<span class="line"><span>1 verbose cli   &#39;run&#39;,</span></span>
<span class="line"><span>1 verbose cli   &#39;build&#39; ]</span></span>
<span class="line"><span>2 info using npm@5.6.0</span></span>
<span class="line"><span>3 info using node@v8.10.0</span></span>
<span class="line"><span>4 verbose run-script [ &#39;prebuild&#39;, &#39;build&#39;, &#39;postbuild&#39; ]</span></span>
<span class="line"><span>5 info lifecycle yuntu-isight@1.0.0~prebuild: yuntu-isight@1.0.0</span></span>
<span class="line"><span>6 info lifecycle yuntu-isight@1.0.0~build: yuntu-isight@1.0.0</span></span>
<span class="line"><span>7 verbose lifecycle yuntu-isight@1.0.0~build: unsafe-perm in lifecycle true</span></span>
<span class="line"><span>8 verbose lifecycle yuntu-isight@1.0.0~build: PATH: /var/lib/jenkins/tools/jenkins.plugins.nodejs.tools.NodeJSInstallation/NODEJS-8.10.0/lib/node_modules/npm/node_modules/npm-lifecycle/node-gyp-bin:/var/lib/jenkins/workspace/yuntu-isight/node_modules/.bin:/var/lib/jenkins/tools/jenkins.plugins.nodejs.tools.NodeJSInstallation/NODEJS-8.10.0/bin:/sbin:/usr/sbin:/bin:/usr/bin</span></span>
<span class="line"><span>9 verbose lifecycle yuntu-isight@1.0.0~build: CWD: /var/lib/jenkins/workspace/yuntu-isight</span></span>
<span class="line"><span>10 silly lifecycle yuntu-isight@1.0.0~build: Args: [ &#39;-c&#39;, &#39;node build/build.js&#39; ]</span></span>
<span class="line"><span>11 silly lifecycle yuntu-isight@1.0.0~build: Returned: code: 1  signal: null</span></span>
<span class="line"><span>12 info lifecycle yuntu-isight@1.0.0~build: Failed to exec build script</span></span>
<span class="line"><span>13 verbose stack Error: yuntu-isight@1.0.0 build: \`node build/build.js\`</span></span>
<span class="line"><span>13 verbose stack Exit status 1</span></span>
<span class="line"><span>13 verbose stack     at EventEmitter.&lt;anonymous&gt; (/var/lib/jenkins/tools/jenkins.plugins.nodejs.tools.NodeJSInstallation/NODEJS-8.10.0/lib/node_modules/npm/node_modules/npm-lifecycle/index.js:285:16)</span></span>
<span class="line"><span>13 verbose stack     at emitTwo (events.js:126:13)</span></span>
<span class="line"><span>13 verbose stack     at EventEmitter.emit (events.js:214:7)</span></span>
<span class="line"><span>13 verbose stack     at ChildProcess.&lt;anonymous&gt; (/var/lib/jenkins/tools/jenkins.plugins.nodejs.tools.NodeJSInstallation/NODEJS-8.10.0/lib/node_modules/npm/node_modules/npm-lifecycle/lib/spawn.js:55:14)</span></span>
<span class="line"><span>13 verbose stack     at emitTwo (events.js:126:13)</span></span>
<span class="line"><span>13 verbose stack     at ChildProcess.emit (events.js:214:7)</span></span>
<span class="line"><span>13 verbose stack     at maybeClose (internal/child_process.js:925:16)</span></span>
<span class="line"><span>13 verbose stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:209:5)</span></span>
<span class="line"><span>14 verbose pkgid yuntu-isight@1.0.0</span></span>
<span class="line"><span>15 verbose cwd /var/lib/jenkins/workspace/yuntu-isight</span></span>
<span class="line"><span>16 verbose Linux 2.6.32-431.el6.x86_64</span></span>
<span class="line"><span>17 verbose argv &quot;/var/lib/jenkins/tools/jenkins.plugins.nodejs.tools.NodeJSInstallation/NODEJS-8.10.0/bin/node&quot; &quot;/var/lib/jenkins/tools/jenkins.plugins.nodejs.tools.NodeJSInstallation/NODEJS-8.10.0/bin/npm&quot; &quot;run&quot; &quot;build&quot;</span></span>
<span class="line"><span>18 verbose node v8.10.0</span></span>
<span class="line"><span>19 verbose npm  v5.6.0</span></span>
<span class="line"><span>20 error code ELIFECYCLE</span></span>
<span class="line"><span>21 error errno 1</span></span>
<span class="line"><span>22 error yuntu-isight@1.0.0 build: \`node build/build.js\`</span></span>
<span class="line"><span>22 error Exit status 1</span></span>
<span class="line"><span>23 error Failed at the yuntu-isight@1.0.0 build script.</span></span>
<span class="line"><span>23 error This is probably not a problem with npm. There is likely additional logging output above.</span></span>
<span class="line"><span>24 verbose exit [ 1, true ]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>发现也没代码上的报错情况，找了一圈找到了错误关键词<code>error code ELIFECYCLE</code>,然后上 Google 搜索了下，找到了一个类似的问题<a href="https://stackoverflow.com/questions/42308879/npm-err-code-elifecycle" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/questions/42308879/npm-err-code-elifecycle</a>，解决方法大都如下：</p><ol><li>清空 npm 的缓存</li><li>删除<code>node_modules</code></li><li>删除<code>package-lock.json</code></li><li>重新<code>npm install</code></li></ol><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">npm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cache</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> clean</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --force</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -rf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> node_modules</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -rf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> package-lock.json</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">npm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>由于用的<code>Jenkins</code>配置的自动打包，所以先把工作空间内容删了，也就不存在<code>node_modules</code>了，在 Build 中执行 Shell<code>npm install</code>之前加了如下：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">npm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cache</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> clean</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --force</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -rf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> package-lock.json</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://image.liubing.me/2023/01/05/b0c56e89de7ce.jpg" alt="image" tabindex="0" loading="lazy"><figcaption>image</figcaption></figure><p>最后重新试了下构建，显示 Success，OK 问题解决。</p><figure><img src="https://image.liubing.me/2023/01/05/456d58a6f0cfe.jpg" alt="image" tabindex="0" loading="lazy"><figcaption>image</figcaption></figure>`,11)]))}const o=n(l,[["render",t]]),d=JSON.parse('{"path":"/article/vue/jenkins-vue-build-error-code-elifecycle.html","title":"记录线上环境 Jenkins Vue 打包失败 error code ELIFECYCLE","lang":"zh-CN","frontmatter":{"date":"2019-05-20T00:00:00.000Z","category":["Vue","其他","Jenkins"],"tag":["Vue","Jenkins"],"layout":"ArticleLayout","containerClass":"article-container","description":"Jenkins 里面的 Nodejs 版本换了下，然后自动打包的时候老是失败，提取了下日志信息。","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"记录线上环境 Jenkins Vue 打包失败 error code ELIFECYCLE\\",\\"image\\":[\\"https://image.liubing.me/2023/01/05/b0c56e89de7ce.jpg\\",\\"https://image.liubing.me/2023/01/05/456d58a6f0cfe.jpg\\"],\\"datePublished\\":\\"2019-05-20T00:00:00.000Z\\",\\"dateModified\\":\\"2023-06-20T14:06:59.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Bing🐣\\"}]}"],["meta",{"property":"og:url","content":"https://liubing.me/article/vue/jenkins-vue-build-error-code-elifecycle.html"}],["meta",{"property":"og:site_name","content":"Bing🐣"}],["meta",{"property":"og:title","content":"记录线上环境 Jenkins Vue 打包失败 error code ELIFECYCLE"}],["meta",{"property":"og:description","content":"Jenkins 里面的 Nodejs 版本换了下，然后自动打包的时候老是失败，提取了下日志信息。"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://image.liubing.me/2023/01/05/b0c56e89de7ce.jpg"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-06-20T14:06:59.000Z"}],["meta",{"property":"article:tag","content":"Jenkins"}],["meta",{"property":"article:tag","content":"Vue"}],["meta",{"property":"article:published_time","content":"2019-05-20T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-06-20T14:06:59.000Z"}]]},"git":{"createdTime":1672905874000,"updatedTime":1687270019000,"contributors":[{"name":"liub1934","username":"liub1934","email":"liub1934@gmail.com","commits":6,"url":"https://github.com/liub1934"}]},"readingTime":{"minutes":1.79,"words":537},"filePathRelative":"article/vue/jenkins-vue-build-error-code-elifecycle.md","excerpt":"\\n<p>Jenkins 里面的 Nodejs 版本换了下，然后自动打包的时候老是失败，提取了下日志信息。</p>\\n","autoDesc":true}');export{o as comp,d as data};
